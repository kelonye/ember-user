// Generated by CoffeeScript 1.6.1
var get, set;

get = Em.get;

set = Em.set;

module.exports = function(url) {
  if (url == null) {
    url = '/users/me/';
  }
  Em.Application.initializer({
    name: "user",
    initialize: function(container, App) {
      console.log('user');
      App.UserController = Em.ObjectController.extend({
        init: function() {
          var that;
          that = this;
          return Em.$.ajax({
            url: url,
            type: 'GET',
            contentType: 'application/json',
            success: function(key) {
              var user;
              if (key !== '') {
                user = App.User.find(key);
                return set(that, 'content', user);
              }
            }
          });
        }
      });
      container.register('user', 'main', App.UserController);
      return container.lookup('user:main');
    }
  });
  return Em.Application.initializer({
    name: "injectUser",
    initialize: function(container, App) {
      console.log('injectUser');
      container.typeInjection('controller', 'user', 'user:main');
      return container.typeInjection('route', 'user', 'user:main');
    }
  });
};
